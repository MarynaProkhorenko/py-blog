{% extends "base.html" %}

{% block content %}
  <h1>
    {{ post.title }}
  </h1>

  <p><strong>Autor:</strong> {{ post.owner }}</p>
  <p>Created time: {{ post.created_time }}</p>
  <p> {{ post.content }}</p><br>
  <p><strong>Comments:</strong></p>
  {% if post.commentaries.count %}
    {% for comment in post.commentaries.all %}
      <hr>
      <p><srtong>{{ comment.user }}</srtong> - {{ comment.created_time }}</p>
      <p><span>{{ comment.content }}</span></p><br>
      </hr>
    {% endfor %}
    {% else %}
      <p>Your comment will be first</p>
  {% endif %}

  {% if user.is_authenticated %}
  <h2>Create comment</h2>
  <form action="{% url 'blog:comment-create' %}?pk={{ post.id }}" method="post" novalidate>
      {% csrf_token %}
      <textarea class="form-control ml-1 shadow-none textarea" type="text" name="content"></textarea>
      <input class="btn btn-primary float-right" type="submit" value="Add comment">
  </form>
    {% else %}
    <li class="list-group-item"><a href="{% url 'login'%}?next={{request.path}}">Login</a> Please, login to add comment</li>
  {% endif %}
{% endblock %}
